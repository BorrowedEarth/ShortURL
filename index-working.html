<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Short URL Service - eled.org</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”—</text></svg>">
</head>
<body>
    <div class="container">
        <div class="logo">ðŸ”— eled.org</div>
        <div class="subtitle">Fast, reliable URL shortening service</div>
        
        <div class="url-form">
            <div class="input-group">
                <input type="text" id="longUrl" placeholder="Enter your long URL here...">
                <button class="shorten-btn" onclick="shortenUrl()">Shorten</button>
            </div>
            <div class="loading" id="loading">Processing...</div>
            <div class="error" id="error"></div>
            <div class="result" id="result">
                <div>Your shortened URL:</div>
                <div class="short-url" id="shortUrl"></div>
                <button class="copy-btn" onclick="copyToClipboard()">Copy</button>
            </div>
        </div>

        <div class="url-list">
            <h3>Recent Short URLs:</h3>
            <div id="urlList">
                <div class="url-item">
                    <strong>eled.org/3-5-class-set-up</strong><br>
                    <small style="color: #666;">www.eleducation.org/curriculum/language-arts/planning/3-5-classroom-setup-2025/</small>
                </div>
                <div class="url-item">
                    <strong>eled.org/K2-class-set-up</strong><br>
                    <small style="color: #666;">www.eleducation.org/curriculum/language-arts/planning/k-2-classroom-setup-2025/</small>
                </div>
                <div class="url-item">
                    <strong>eled.org/6349</strong><br>
                    <small style="color: #666;">www.eleducation.org/curriculum/language-arts/planning/routines/language-dive-sentence/</small>
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalUrls">18</div>
                <div class="stat-label">Total URLs</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalClicks">1,247</div>
                <div class="stat-label">Total Clicks</div>
            </div>
        </div>
    </div>

    <script>
        console.log('Starting Short URL Service...');
        
        function shortenUrl() {
            console.log('shortenUrl called');
            const longUrlInput = document.getElementById('longUrl');
            const loadingDiv = document.getElementById('loading');
            const errorDiv = document.getElementById('error');
            const resultDiv = document.getElementById('result');
            const shortUrlDiv = document.getElementById('shortUrl');

            const longUrl = longUrlInput.value.trim();

            // Reset UI
            loadingDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            resultDiv.style.display = 'none';

            if (!longUrl) {
                showError('Please enter a URL');
                return;
            }

            // Add protocol if missing
            let processedUrl = longUrl;
            if (!longUrl.startsWith('http://') && !longUrl.startsWith('https://')) {
                processedUrl = 'https://' + longUrl;
            }

            // Validate URL
            try {
                new URL(processedUrl);
            } catch (e) {
                showError('Please enter a valid URL');
                return;
            }

            // Show loading
            loadingDiv.style.display = 'block';

            // Simulate processing
            setTimeout(() => {
                const shortCode = Math.random().toString(36).substring(2, 8);
                const shortUrl = `eled.org/${shortCode}`;
                
                shortUrlDiv.textContent = shortUrl;
                loadingDiv.style.display = 'none';
                resultDiv.style.display = 'block';
                
                // Clear input
                longUrlInput.value = '';
                
                console.log('Generated short URL:', shortUrl);
            }, 800);
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function copyToClipboard() {
            const shortUrlDiv = document.getElementById('shortUrl');
            const shortUrl = 'https://' + shortUrlDiv.textContent;
            
            navigator.clipboard.writeText(shortUrl).then(() => {
                const copyBtn = event.target;
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied! âœ“';
                copyBtn.style.background = '#45a049';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '#4caf50';
                }, 2000);
            }).catch(() => {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = shortUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const copyBtn = event.target;
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied! âœ“';
                copyBtn.style.background = '#45a049';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '#4caf50';
                }, 2000);
            });
        }

        // Handle Enter key
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            const longUrlInput = document.getElementById('longUrl');
            if (longUrlInput) {
                longUrlInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        shortenUrl();
                    }
                });
                longUrlInput.focus();
            }
        });
        
        console.log('Script loaded successfully');
    </script>
</body>
</html>
